services:
  notificacao_app:
    container_name: notificacao_app
    build:
      context: .
      dockerfile: Dockerfile
    image: notificacao_app:latest
    ports:
      - 8081:8081
    depends_on:
      mysql_notify:
          condition: service_healthy
    networks:
      - shared_network
    environment:
      - AWS_ENDPOINT_URL=http://localstack:4566

  mysql_notify:
    image: 'mysql:8.0'
    container_name: mysql_notify
    environment:
      - MYSQL_DATABASE=vaga_liberada_notificacao_db
      - MYSQL_ROOT_PASSWORD=root
    ports:
      - '3308:3306' # Porta 3308 para n√£o bater com o banco da Agenda (3306)
    healthcheck:
      test: [ "CMD", "mysqladmin" ,"ping", "-h", "localhost" ]
      timeout: 20s
      retries: 10
    networks:
      - shared_network

networks:
  shared_network:
    external: true
